# 老司机 iOS 周报 #187 | 2021-12-27

![ios-weekly](https://github.com/SwiftOldDriver/iOS-Weekly/blob/master/assets/ios-weekly.png?raw=true)
老司机 iOS 周报，只为你呈现有价值的信息。

你也可以为这个项目出一份力，如果发现有价值的信息、文章、工具等可以到 [Issues](https://github.com/SwiftOldDriver/iOS-Weekly/issues) 里提给我们，我们会尽快处理。记得写上推荐的理由哦。有建议和意见也欢迎到 [Issues](https://github.com/SwiftOldDriver/iOS-Weekly/issues) 提出。

## 新闻

> 行业相关的新闻、趣事、看法

### 🐎 [Log4j Xcode vulnerability](https://developer.apple.com/forums/thread/696785)
[@Smallfly](https://github.com/iostalks)：近期 Java 日志库 Log4j 漏洞影响了很多国内外主流的大平台，有用户在苹果论坛上指出，Xcode 在上传应用到 App Store 时使用了 Java 运行环境，疑似存在风险。苹果团队回应 Xcode 确实包含 Log4j 副本，Xcode 13.2.1 会自动更新到修复版本。

建议及时升级 Xcode。

## 新手推荐

> 收集一些对新手友好且质量不错的文章

## 文章

### 🌟 🐕 [Flutter疑难杂症系列：实现支持复杂需求的列表](https://mp.weixin.qq.com/s/CtcxDtTgcEh0L77Z2g9HFg)

[@CrazyCoderShi](https://github.com/CrazyCoderShi): 列表页面在移动端开发可谓是一个必然面对的场景，复杂业务下的列表优化也是个老生常谈的话题，在 Flutter 中也是如此，本文是由字节跳动基础架构团队奉献，详细讲解了 Flutter 中如何应对复杂需求下的列表页，从原理到实践，到性能分析，再到功能扩展，一步步抽丝剥茧，值得每一位 Flutter 开发者细读，小编强烈推荐。

### 🌟 🐕 [Swift代码优化指南 | 如何最大化实现性能提升？](https://mp.weixin.qq.com/s/xGeLeqcXBeBw1zMPqBZKYA)

[@JonyFang](https://github.com/JonyFang)：本篇从语法角度优化代码，长远来看有益于养成良好的代码习惯，某种程度上从根源减少错误的产生。详细内容：
1. 编译速度优化
	- 费时类型判断；
	- 现实运用中的取舍；
2. 内存分配与占用
	- 关于 struct 的使用；
	- 用轻便的 Enum 替代 String；
	- 优化集合类型（内存分配策略、预分配内存、惰性序列）；
	- 减少不必要的桥接（ContiguousArray 替换 NSArray）；
	- 善用写时复制；
3. 运行时速度优化
	- 介绍三种函数派发；
	- 使用 final、private 优化派发方式；


### 🐕 [错误处理原则及其在Swift中的应用](https://mp.weixin.qq.com/s/DJKuCXzqxBg7LPmtPMgglw)

[@Barney](https://github.com/BarneyZhaoooo)：本文讨论了容易被大家忽视的错误处理，以及一些Swift中的应用。

- 错误处理的目标
- 错误处理的方案
- 异步函数的错误处理
- Swift标准库的行为

### 🐢 [A roadmap for improving Swift performance predictability: ARC improvements and ownership control](https://forums.swift.org/t/a-roadmap-for-improving-swift-performance-predictability-arc-improvements-and-ownership-control/54206)

[@ChengzhiHuang](https://github.com/ChengzhiHuang)：Swift 的开发者为我们带来了基于 ARC 内存管理的新特性 roadmap ，总体思路是在不影响主要代码逻辑阅读的前提下，在参数定义时增加特定的一些关键字来优化标明持有关系，使 debug/release 下的表现一致，辅以编译器的强提示来保证安全性；相较 C++ 严格的作用域模型，Swift 会略微宽松一些，同时也能避免在 deinit 时有先后顺序的依赖导致的问题。特别强调，目前只是 roadmap ，后续可能还会有变更。同时对目前 debug/release 释放时机不明确可能导致的问题进行了举例：例如在 deinit 时会调用 free ，而 free 对 errno 有影响，如果判定对象能够提前被释放，就有可能导致程序在 debug/release 下有不同的表现。

主要内容如下：
- 通过 move() 方法，在函数内显式转移控制权，这样原本的变量就不再被持有，那就被编译器认为可以被释放，可以避免 Copy-on-write 的多余操作。同时在函数内期望最后的一次使用该变量时，也可以调用此方法，防止该变量后续再被调用。
- 通过在函数声明时对参数标注 consuming/nonconsuming 来传达持有关系。
- 通过将 getter/setter 函数替换为 read/modify 来避免对 Array/Dictionary/Set 等类型的无用 Copy-on-write 。
- 通过对参数标注 @noImplicitCopy 来保证：在函数体内，如果传递该参数到标明 consuming 的方法时，则需要显式调用 copy 方法，来确认参数的所有权。如果不显式调用，则会在编译期报错。
- 对参数也可使用 @nonescaping 进行标注。
- 上述 @nonescaping/@noImplicitCopy 的变量统称为 move-only 类型，会对参数列表中包含 move-only 类型的 API 进行性能优化。

## 摸鱼周报

[@摸鱼周报 #39](https://mp.weixin.qq.com/s/DolkTjL6d-KkvFftd2RLUQ)：第三十九期摸鱼周报来了，一起来看下本期概要：

* Tips：混编｜为 Swift 改进 Objective-C API。
* 面试模块：HTTPS 证书有效性的验证过程。
* 优秀博客：Core Data、Realm、MMKV 这几个库相关的一些介绍。
* 学习资料：一个学习正则表达式的网站。
* 开发工具：一个安装 Xcode 的 CLI 工具 `xcinfo`，一款开源的 Markdown 编辑工具 Mark Text。

本期访谈对象是老司机周报的主编：Parsifal。本次访谈主题分两部分，一部分是老司机周报的发展故事和他的行业观察，另一部分是他对开发者的一些建议。详情可以点击：[人物访谈 | 老司机周报主编 Parsifal 专访](https://mp.weixin.qq.com/s/HWbPbPBPYgFJsM-oc_4tvw)

## 工具

> 开发过程中常用的工具，及一些新工具的介绍

## 代码

> 库，代码段，开源app

## 书

> 比较不错的书的推荐和书评

## 音视频

### 🐢  [编码人声：新人该怎样入坑开源项目](https://dao.fm/2021/12/09/vol-333-编码人声：新人该怎样入坑开源项目？/)

 [@含笑饮砒霜](https://weibo.com/chinafishnews/)：开源对普通程序猿来说似乎是很遥远的事情，这期播客请到了几位开源领域的大咖，聊一聊如何开始你的开源之旅。本期播客的主要内容：
- 嘉宾参与开源项目的心路历程
- 开源的经济价值和社会价值
- 如何开始参与一个开源项目
- 只有程序员才能参与开源么
- 开源对企业的价值在哪里
- Github等开源平台的生态和挑战
- 自海外诞生的开源文化，在中国会如何


## 赞助者

虚位以待..

**非常感谢以上赞助者的支持，如果你也有赞助我们的兴趣，欢迎添加微信 iTDriverr 哦~**

## 内推

老司机周报团队联合知识小集和 SwiftGG 翻译组收录了一份靠谱的内推职位。

如果你想**找工作**，点这里：https://www.yuque.com/iosalliance/article/bhutav

如果你想**招人**，点这里：https://www.yuque.com/iosalliance/article/ycyhf3

当然，也欢迎你关注我们每一期的周报，我们会在每期周报底部及时更新编辑内推岗位。

## 关注我们

我们开通了公众号，每期发布时公众号（LSJCoding）会推送消息，欢迎关注。

![](https://github.com/SwiftOldDriver/iOS-Weekly/blob/master/assets/qrcode_for_wechat.jpg?raw=true)

同时也支持了 RSS 订阅：https://github.com/SwiftOldDriver/iOS-Weekly/releases.atom 。

## 说明

🚧 表示需某工具，🌟 表示编辑推荐

预计阅读时间：🐎 很快就能读完（1 - 10 mins）；🐕 中等 （10 - 20 mins）；🐢 慢（20+ mins）
